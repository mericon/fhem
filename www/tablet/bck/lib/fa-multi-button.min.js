"use strict";!function(t){t.fn.famultibutton=function(e){function b(){a=!0,o.bg.css("color",m.onBackgroundColor),o.fg.css("color",m.onColor),n.addClass("active"),o.trigger("setOn")}function w(){a=!1,o.bg.css("color",m.offBackgroundColor),o.fg.css("color",m.offColor),n.removeClass("active"),o.trigger("setOff")}function k(t){o.fg.css("color",t)}function I(t){o.bg.css("color",t)}function x(t){o.fg.removeClass(o.fi),o.fi=t,o.fg.addClass(o.fi)}function T(t){o.bg.removeClass(o.bi),o.bi=t,o.bg.addClass(o.bi)}function O(){a&&(a=!1,t("<div />").animate({width:100},{duration:700,easing:"swing",step:function(t,e){var n=(t-e.start)/(e.end-e.start);o.bg.css("color",P(m.onBackgroundColor,m.offBackgroundColor,n)),o.fg.css("color",P(m.onColor,m.offColor,n))}}))}function y(t){var e=t.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i);return e&&4===e.length?"#"+("0"+parseInt(e[1],10).toString(16)).slice(-2)+("0"+parseInt(e[2],10).toString(16)).slice(-2)+("0"+parseInt(e[3],10).toString(16)).slice(-2):t}function P(t,e,o){t=y(t).replace(/^\s*#|\s*$/g,""),e=y(e).replace(/^\s*#|\s*$/g,""),3==t.length&&(t=t.replace(/(.)/g,"$1$1")),3==e.length&&(e=e.replace(/(.)/g,"$1$1"));var n=parseInt(t.substr(0,2),16),a=parseInt(t.substr(2,2),16),i=parseInt(t.substr(4,2),16),r=parseInt(e.substr(0,2),16),s=parseInt(e.substr(2,2),16),f=parseInt(e.substr(4,2),16),l=r-n,c=s-a,u=f-i;return l=(l*o+n).toString(16).split(".")[0],c=(c*o+a).toString(16).split(".")[0],u=(u*o+i).toString(16).split(".")[0],1==l.length&&(l="0"+l),1==c.length&&(c="0"+c),1==u.length&&(u="0"+u),"#"+l+c+u}function S(e){var a=o.find("canvas#progress");if(e>0){0===a.length&&(a=t("<canvas>").attr({id:"progress"}).appendTo(n));var i=a[0];if(i){i.height=o.h,i.width=o.w;var r=i.width/2,s=i.height/2;if(i.getContext){var f=i.getContext("2d");f.beginPath(),f.strokeStyle=m.onColor,f.arc(r,s,r*(-.4/90*Number(m.progressWidth)+.8),-.5*Math.PI,(-.5+2*e)*Math.PI,!1),f.lineWidth=.8*r*m.progressWidth/100,f.stroke()}}}else o.find("canvas#progress").remove()}function B(){clearTimeout(r),c=u>0?c-=m.step:c+=m.step,c>m.max&&(c=m.max),c<m.min&&(c=m.min),D();var t=f[Math.abs(u)];r=setTimeout(function(){B()},500-t)}function D(){var t=i[0];if(t.height=o.h,t.width=o.w,t.getContext){var e=t.getContext("2d");e.strokeStyle=m.offBackgroundColor;for(var n=m.max,r=m.min,s=t.height-Math.round(t.height*(c-r)/(n-r)),f=0;f<t.height;f+=4)e.lineWidth=1,e.beginPath(),e.moveTo(5,f),e.lineTo(25,f),e.stroke();e.strokeStyle=a?m.onBackgroundColor:P(m.offBackgroundColor,"#ffffff",.4),e.lineWidth=3,e.beginPath(),e.moveTo(5,s),e.lineTo(25,s),e.stroke(),e.fillStyle=P(m.offBackgroundColor,"#ffffff",.4),e.font="10px sans-serif",e.fillText(c,30,t.height)}}function M(){i.css({position:"absolute","z-index":-1}),h?i.animate({left:.6*-o.w+"px"}):i.animate({left:o.w/5+"px",top:"0px"})}function A(t){t=(t||navigator.userAgent).toLowerCase();var e=t.match(/android\s([0-9\.]*)/);return e?e[1]:!1}function W(){var e,f,y,g=A(),v=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,C=g&&parseFloat(g)<5||v,k=C?"touchstart":"touchstart mousedown",I=C?"touchmove":"touchmove mousemove",x=C?"touchend":"touchend mouseup",T=C?"touchleave":"touchleave mouseout";"push"==m.mode?(n.on(k,function(o){o.stopImmediatePropagation(),f=t(window).scrollTop(),e=t(window).scrollLeft()}),n.on(x,function(n){return n.preventDefault(),n.stopImmediatePropagation(),Math.abs(f-t(window).scrollTop())>3||Math.abs(e-t(window).scrollLeft())>3?void 0:(y=a,b(),"function"==typeof m.toggleOn&&m.toggleOn.call(this),setTimeout(function(){O()},200),y===!0&&setTimeout(function(){b()},1e3),setTimeout(function(){a===!0&&b()},1200),o.trigger("clicked"),!1)})):"updown"==m.mode?(n.on(k,function(t){t.preventDefault(),t.stopImmediatePropagation(),y=a,b(),"function"==typeof m.toggleOn&&m.toggleOn.call(this)}),n.on(x,function(t){return t.preventDefault(),t.stopImmediatePropagation(),"function"==typeof m.toggleOff&&m.toggleOff.call(this),setTimeout(function(){O()},200),y===!0&&setTimeout(function(){b()},1e3),setTimeout(function(){a===!0&&b()},1200),o.trigger("clicked"),!1})):"toggle"==m.mode?(n.on(k,function(o){o.stopImmediatePropagation(),f=t(window).scrollTop(),e=t(window).scrollLeft()}),n.on(x,function(n){return n.preventDefault(),n.stopImmediatePropagation(),Math.abs(f-t(window).scrollTop())>3||Math.abs(e-t(window).scrollLeft())>3?void 0:(a?(w(),"function"==typeof m.toggleOff&&m.toggleOff.call(this)):(b(),"function"==typeof m.toggleOn&&m.toggleOn.call(this)),o.trigger("clicked"),!1)})):"dimmer"==m.mode&&(n.on(k,function(t){t.preventDefault(),t.stopImmediatePropagation();var e=t.originalEvent;l=e.touches?e.touches[0].clientY:t.pageY,u=0,p=!0}),n.on(T,function(t){t.preventDefault(),t.stopImmediatePropagation(),h&&(h=!1,n.animate({top:0}),clearInterval(r),s=!1,M()),p=!1}),n.on(x,function(t){return t.preventDefault(),t.stopImmediatePropagation(),h?(h=!1,n.animate({top:0}),clearTimeout(r),s=!1,"function"==typeof m.valueChanged&&m.valueChanged.call(this,c)):a?(w(),"function"==typeof m.toggleOff&&m.toggleOff.call(this)):(b(),"function"==typeof m.toggleOn&&m.toggleOn.call(this)),h=!1,p=!1,M(),D(),o.trigger("clicked"),!1}),n.on(I,function(t){t.preventDefault(),t.stopImmediatePropagation(),p&&(h=!0);var e=t.originalEvent;if(d=e.touches?e.touches[0].clientY:t.pageY,u=d-l,u>20&&(u=20),-20>u&&(u=-20),h){this.style.top=u+"px";var o=i[0];o.style.top=-u+"px",s||(M(),B(),s=!0)}}))}if(this.length>1)return this.each(function(){t(this).famultibutton(e)}),this;var n,i,r,o=this,a=!1,s=!1,f=[0,10,40,80,120,140,150,160,180,200,240,260,280,300,320,420,430,440,450,460,470],l=0,c=0,u=0,g=0,d=0,h=!1,p=!1,v={backgroundIcon:"fa-circle",classes:["fa-2x"],icon:"fa-power-off",offColor:"#2A2A2A",offBackgroundColor:"#505050",onColor:"#2A2A2A",onBackgroundColor:"#aa6900",mode:"toggle",toggleOn:null,toggleOff:null,valueChanged:null,progressWidth:15,max:100,min:0,step:1},m=t.extend({},v,e),C=function(){m=t.extend({},m,o.data());var e=o.html()!==o.text()?jQuery("<div>",{}).html(o.html()).children().detach():jQuery("<div>",{}).text(o.text());if("none"!==m.onColor&&"none"!==m.offColor&&e.attr("id","fg"),e.addClass("fa-stack-1x"),o.html(""),o.bi=m.backgroundIcon,o.fi=m.icon,n=t("<div/>",{"class":"famultibutton"}),n.addClass("fa-stack"),o.bg=jQuery("<i/>",{id:"bg","class":"fa fa-stack-2x"}).addClass(o.bi),o.fg=jQuery("<i/>",{id:"fg","class":"fa fa-stack-1x"}).addClass(o.fi),e.appendTo(n),m.classes&&m.classes.length>0)for(var a=0,r=m.classes.length;r>a;a++)n.addClass(m.classes[a]);return o.bg.appendTo(n),o.fg.appendTo(n),n.appendTo(o),o.o=m,o.w=n.width(),o.h=n.height(),w(),"dimmer"==m.mode&&(i=t("<canvas>").attr({id:"scale",height:o.h+"px",width:o.w+"px"}).appendTo(n),g=parseInt(i.offset().top)-parseInt(n.offset().top),D(),M()),o.data("famultibutton",o),W(),o};return this.setOn=function(){b()},this.setOff=function(){w()},this.getState=function(){return a},this.getValue=function(){return c},this.setDimValue=function(t){c=t,D()},this.setProgressValue=function(t){S(t)},this.setForegroundColor=function(t){k(t)},this.setBackgroundColor=function(t){I(t)},this.setForegroundIcon=function(t){x(t)},this.setBackgroundIcon=function(t){T(t)},C()}}(jQuery);